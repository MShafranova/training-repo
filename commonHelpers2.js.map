{"version":3,"file":"commonHelpers2.js","sources":["../src/js/categories.js","../src/js/booksAPI.js","../src/js/main-list.js"],"sourcesContent":["//Render one book\nfunction renderOneBook(books) {\n  const booksRendered = books\n    .map(el => {\n      const { _id, book_image, title, author } = el;\n      return `<li class=\"books-box-itm\" id=\"${_id}\">\n      <div class=\"books-box-wrap\">\n              <img\n                class=\"books-img\"\n                src=\"${book_image}\"\n                alt=\"${title}\"\n              />\n              <div class=\"books-overlay\">\n                <a href=\"#\" data-id=\"${_id}\" class=\"books-overlay-text\">\n                quick view </a>\n              </div>\n            </div>\n            <div class=\"books-box-desc\">\n              <p class=\"books-box-desc-title\">${title}</p>\n              <p class=\"books-box-desc-author\">${author}</p>\n            </div> \n            </li>`;\n    })\n    .join('');\n\n  return booksRendered;\n}\n//Render top books\nexport const renderTopBooks = (data, booksPerRow) => {\n  const categoriesTopBooks = data\n    .map(el => {\n      const categoryName = el.list_name;\n      const books = renderOneBook(el.books.slice(0, booksPerRow));\n      return `<div class=\"books-box-holder\">\n        <h3 class=\"books-box-subtitle\">${categoryName}</h3>\n        <ul class=\"books-box-list\">${books}</ul>\n        <button data-categoryName=\"${categoryName}\" class=\"books-btn-see-more\" type=\"button\">see more</button>\n      </div>`;\n    })\n    .join('');\n\n  return `<div class=\"books-container\"><h2 class=\"books-title\">Best Sellers Books</h2>${categoriesTopBooks}</div>`;\n};\n//Render categories\nexport const renderCategoriesList = data => {\n  const categoriesItems = data\n    .map(el => {\n      return `<li class=\"categories-itm\"><a href=\"#\" data-categoryName=\"${el.list_name}\">${el.list_name}</a></li>`;\n    })\n    .join('');\n\n  return `<li class=\"categories-itm js-categories-current \"><a href=\"#\" data-categoryName=\"\">All categories</a></li>${categoriesItems}`;\n};\n//Render category books\nexport const renderBooksByCategory = data => {\n  const categoryMarkup = data\n    .map(el => {\n      const books = renderOneBook(el);\n      return `<div class=\"books-category-box visually-hidden\">\n      <h2 class=\"books-box-title\">${el.list_name}</h2>\n      <ul class=\"books-category-list\">${books}</ul>\n    </div>`;\n    }).join('');\n\n  return categoryMarkup;\n};\n\n\n\n\n// export const renderBooksByCategory = (data) => {\n//   const categoryMarkup = data.map(el => {\n//     const books = renderOneBook(data)\n//     return `<div class=\"books-category-box visually-hidden\">\n//     <h2 class=\"books-box-title\">${el.list_name}</h2>\n//             <ul class=\"books-category-list\">${books}</ul>\n//             </div>`\n//   }).join('');\n//   return categoryMarkup;\n// }\n","import axios from \"axios\";\nimport { renderTopBooks, renderCategoriesList, renderBooksByCategory } from './categories.js';\n\nconst BASE_URL = 'https://books-backend.p.goit.global';\n\nconst fetchData = async (endpoint, params = null) => {\n  const fetchUrl = `${BASE_URL}/books${endpoint}`;\n\n  try {\n    const response = await axios.get(fetchUrl, { params });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const getTopBooks = async (booksPerRow) => {\n  const data = await fetchData('/top-books/');\n  return renderTopBooks(data, booksPerRow);\n};\n\nexport const getCategoryList = async () => {\n  const data = await fetchData('/category-list/');\n  return renderCategoriesList(data);\n};\n\n\nexport const getBooksByCategory = async (categoryName = '') => {\n  const data = await fetchData('/category/', { category: categoryName });\n  return renderBooksByCategory(data);\n};\n\nexport const getBookInfo = async (id) => {\n  return fetchData(`/${id}`);\n};\n// export const getBooksByCategory = async (categoryName = el.list_name) => {\n//   const data = await fetchData('/category/', { category: categoryName });\n//   return renderBooksByCategory(data, categoryName);\n// };\n\n\n","\nimport { getTopBooks, getCategoryList, getBooksByCategory } from './booksAPI.js';\n\nconst booksContainer = document.querySelector('.books-box');\nconst categoriesListContainer = document.querySelector('.categories-list');\n\nconst BOOKS_PER_ROW_MAP = {\n    'default': 3,\n    'largeScreen': 5,\n    'smallScreen': 1\n};\n\n// Function to display books\nasync function showBooks(renderedContent) {\n    booksContainer.innerHTML = renderedContent;\n    const titleElement = document.querySelector('.books-box-desc-title');\n    \n    if (titleElement) {\n        wrapLastWord(titleElement);\n    }\n}\n// Function to display categories\nasync function showCategories() {\n    const renderedCategories = await getCategoryList();\n    categoriesListContainer.innerHTML = renderedCategories;\n}\n\n// Function to display top books\nexport async function showTopBooks() {\n    const windowWidth = window.innerWidth;\n    const booksPerRow = determineBooksPerRow(windowWidth);\n    const renderedTop = await getTopBooks(booksPerRow);\n    showBooks(renderedTop);\n}\n\n// Function to display books by category\nexport async function showBooksByCategory(categoryName) {\n    const renderedBooks = await getBooksByCategory(categoryName);\n    return showBooks(renderedBooks);\n  }\n  \n  \n  // Function to wrap the last word in the title\n  function wrapLastWord(titleElement) {\n      const textContent = titleElement.textContent.split(\" \");\n      const lastWord = textContent.pop();\n    const updatedContent = textContent.join(\" \") + (textContent.length > 0 ? ` <span class=\"books-title-color\">${lastWord}</span>` : lastWord);\n    titleElement.innerHTML = updatedContent;\n}\n// Function to determine the number of books per row based on window width\nfunction determineBooksPerRow(windowWidth) {\n    if (windowWidth >= 1440) {\n        return BOOKS_PER_ROW_MAP.largeScreen;\n    } else if (windowWidth < 768) {\n        return BOOKS_PER_ROW_MAP.smallScreen;\n    } else {\n        return BOOKS_PER_ROW_MAP.default;\n    }\n}\n\n// Initialize the page\nif (booksContainer) {\n    showTopBooks();\n    showCategories();\n    \n    categoriesListContainer.addEventListener('click', handleCategoryClick);\n    booksContainer.addEventListener('click', handleSeeMoreClick);\n}\n\n// Event handler for category click\nfunction handleCategoryClick(e) {\n    e.preventDefault();\n    const target = e.target;\n    \n    if (target.tagName === 'A') {\n        const categoryName = target.dataset.categoryName;\n        \n        categoriesListContainer.querySelector('.js-categories-current').classList.remove('js-categories-current');\n        target.classList.add('js-categories-current');\n\n        if (categoryName === '') {\n            // Якщо натиснуто \"Усі категорії\", показати TopBooks\n            showTopBooks();\n        } else {\n            // Якщо натиснуто конкретну категорію, показати книги з цієї категорії\n            showBooksByCategory(categoryName);\n        }\n    }\n}\n\n// Event handler for \"See More\" click\nfunction handleSeeMoreClick(e) {\n    e.preventDefault();\n    const target = e.target;\n    \n    if (target.classList.contains('books-btn-see-more')) {\n        const categoryName = target.dataset.categoryName;\n        \n        categoriesListContainer.querySelector('.js-categories-current').classList.remove('js-categories-current');\n        categoriesListContainer.querySelector(`[data-categoryName=\"${categoryName}\"]`).classList.add('js-categories-current');\n        \n        showBooksByCategory(categoryName);\n    }\n}\n\n// export async function showBooksByCategory(categoryName) {\n//     const renderedBooks = await getBooksByCategory(categoryName);\n//     booksContainer.innerHTML = showBooks(renderedBooks);\n// }"],"names":["renderOneBook","books","el","_id","book_image","title","author","renderTopBooks","data","booksPerRow","categoryName","renderCategoriesList","renderBooksByCategory","BASE_URL","fetchData","endpoint","params","fetchUrl","axios","error","getTopBooks","getCategoryList","getBooksByCategory","booksContainer","categoriesListContainer","BOOKS_PER_ROW_MAP","showBooks","renderedContent","titleElement","wrapLastWord","showCategories","renderedCategories","showTopBooks","windowWidth","determineBooksPerRow","renderedTop","showBooksByCategory","renderedBooks","textContent","lastWord","updatedContent","handleCategoryClick","handleSeeMoreClick","target"],"mappings":"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"}